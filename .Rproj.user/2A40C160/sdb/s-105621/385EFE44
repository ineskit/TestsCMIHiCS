{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Experiments CMI & HiCS\"\nauthor: \"Ines Machinek\"\ndate: \"December 6th, 2016\"\noutput: html_document\n---\n\n```{r setup, include=FALSE}\nlibrary(stringr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(data.table)\nlibrary(knitr)\nknitr::opts_chunk$set(echo = TRUE)\nread_chunk(\"generatePlots.R\")\n```\n\n##  Comparing CMI, HiCS and GMD Subspace Search using real-world datasets\n\n### Overview\nThis document contains the results of a comparison of the algorithms CMI, HiCS & GMD.\nFor further documentation, see:\n<ul>\n  <li>\n    Nguyen, Hoang, Vreeken, Jilles, Mueller, Emmanuel, Keller, Fabian and Klemens Boehm. 2013.\n    \"CMI: An Information-Theoretic Contrast Measure for Enhancing Subspace Cluster and Outlier Detection\"\n  </li>\n  <li>\n    Keller, Fabian, Emmanuel Mueller, and Klemens Boehm. 2012. \"HiCS: High Contrast Subspaces for Density-Based Outlier Ranking.\" In 2012 IEEE 28th   \n    International Conference on Data Engineering, 1037-48. IEEE.\n  </li>\n</ul>\nCMI and HiCS algorithms were implemented in inline c++ in R, using the Rcpp-package.\nExperiments ran on Intel core i7-4600U CPU and 8 GB RAM.\n\nFor implementation details see [R-Subcon](https://github.com/holtri/Rsubcon).\n<br>\n<br>\n\n### Datasets\nThe datasets for testing were:\n\n```{r echo = FALSE, results = 'asis'}\n\nDatasets <- c(\"Ann Thyroid\", \"Diabetes\", \"Glass\", \"Ion\", \"Lympho\", \"Pendigits\", \"Segment\")\nRows <- c(3772, 768, 214, 351, 148, 6737, 2013)\nDimensions <- c(6, 8, 7, 32, 18, 16, 19)\n\ndf <-data.frame(Datasets,Rows,Dimensions)\n\nkable(df, caption = \"Datasets - Overview\")\n```\n\n\nDatasets can be downloaded here: \n[IPD, KIT Karlsruhe](http://www.ipd.uni-karlsruhe.de/~muellere/HiCS/)\n<br>\n<br>\n\n### Run Experiments\n1. Download the datasets into the *datasets* folder\n2. Source the *HICSvsCMI_Experiments.R* script\n3. Start experiment by calling **runExperiments**-function, for example:\n```{r eval=FALSE}\n  finalResult <- runExperiments(inputPath = \"datasets\", maxMinPts = 100, numCores=1, topkSearch = 500, topkOutput = 100)\n```\nAutomatically a file *experimentResult.RData* will be written to the *results* folder.\nIf you want to reuse the same structure of the KNITR-File for other experiments, please make sure that you've got 1 RMD-Resultfile per dataset.\n\nResults can be loaded by\n```{r eval=FALSE}\nload(\"results/experimentResult.RData\")\n```\n<br>\n<br>\n\n\n### Results\nThe following results, unless otherwise noted, were observed after having run the algorithms with the parameters: <br>\n* maxMinPts = 100   <br>\n* numCores = 1      <br>\n* topkSearch = 50   <br>\n* topkOutput = 20   <br>\n\n<br>\n<br>\n\n\n```{r, echo=FALSE, warning=FALSE}\n# load data \n\ncolSSVec <- c(1,2,36:55) # top 20 subspaces as vectors\ncolTop5SS <- c(1,2,16:20)   # top 5 subspaces as characters\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_ann_161129.RData\")\nannSS <-combinedResult[,colSSVec, with=FALSE]\nannSSU <-annSS[!duplicated(annSS$algorithm)]\nann5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- combinedResult \n\n# load(\"results/Param_100_050_020_SSVec/experimentResult_ann_161129.RData\")\n# breastSS <-combinedResult[,colSSVec, with=FALSE]\n# breastU <-breastSS[!duplicated(breastSS$algorithm)]\n# breast5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\n# tmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_diabetes_161206.RData\")\ndiabSS <-combinedResult[,colSSVec, with=FALSE]\ndiabSSU <-diabSS[!duplicated(diabSS$algorithm)]\ndiab5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_glass_161129.RData\")\nglassSS <-combinedResult[,colSSVec, with=FALSE]\nglassSSU <-glassSS[!duplicated(glassSS$algorithm)]\nglass5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_ion_161129.RData\")\nionSS <-combinedResult[,colSSVec, with=FALSE]\nionSSU <-ionSS[!duplicated(ionSS$algorithm)]\nion5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_lymph_161206.RData\")\nlympSS <-combinedResult[,colSSVec, with=FALSE]\nlympSSU <-lympSS[!duplicated(lympSS$algorithm)]\nlymp5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_pen_161206.RData\")\npenSS <-combinedResult[,colSSVec, with=FALSE]\npenSSU <-penSS[!duplicated(penSS$algorithm)]\npen5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ntmp <- rbind(tmp, combinedResult)\n\nload(\"results/Param_100_050_020_SSVec/experimentResult_segmentn_161206.RData\")\nsegmSS <-combinedResult[,colSSVec, with=FALSE]\nsegmSSU <-segmSS[!duplicated(segmSS$algorithm)]\nsegm5SS <-combinedResult[!duplicated(combinedResult[,colTop5SS, with=FALSE]),colTop5SS, with=FALSE]\ncombinedResult <- rbind(tmp, combinedResult)\n\n```\n\n#### AUC on real world data \n\n\n```{r eval=T, echo=FALSE, warning=FALSE}\n# <<plotTest>>\n\n# AUC \n\ncombinedResult %>%   \nselect(dataset, algorithm, AUC_sum) %>%\n  \n  group_by(dataset, algorithm) %>%\n  slice(which.max(AUC_sum)) %>%\n group_by(dataset, algorithm) %>%\n  summarize(mean.AUC = mean(AUC_sum), sd.AUC = sd(AUC_sum)) %>%\n  select(dataset, algorithm, mean.AUC, sd.AUC) %>%\n  \n  ggplot(aes(x = factor(dataset), y = mean.AUC, fill = algorithm)) +\n  geom_bar(position = position_dodge(), stat=\"identity\", width = 0.7) +\n  geom_errorbar(aes(ymin=mean.AUC - sd.AUC, ymax=mean.AUC + sd.AUC), width=.2, position = position_dodge(.7)) +\n  xlab(label = \"Dataset\") +\n  ylab(label = \"AUC\") +\n  scale_fill_grey(start = 0.1, end = 0.7)\n\n```\n\n<br>\n<br>\n\n#### Runtime\n\nThe duration of subspace search algorithm and LOF calculation were the following:\n\n```{r, echo=FALSE, warning=FALSE}\n\n# RUNTIME\n\n  combinedResult %>%   \n  select(dataset, algorithm, durationLOF, duationSS) %>%\n  \n  group_by(dataset, algorithm) %>%\n  slice(which.max(sum(duationSS, durationLOF))) %>%\n  group_by(dataset, algorithm) %>%\n  \n  mutate(runtime = sum(duationSS, durationLOF)) %>%\n  \n  ggplot(aes(x = factor(dataset), y = runtime, fill = algorithm)) +\n  geom_bar(position = position_dodge(), stat=\"identity\", width = 0.7) +\n  xlab(label = \"Dataset\") +\n  ylab(label = \"Runtime in sec.\") +\n  scale_fill_brewer(palette = \"Set2\") \n  \n``` \n\n#### Subspaces\n\nOne aspect we considered was the size of the subspaces which were found by the algorithms.\n\n```{r eval=T, echo=FALSE, warning=FALSE}\n# Mean on top20-subspaces:\n\n\nssv <- rbind(annSSU, diabSSU, glassSSU, ionSSU, lympSSU, penSSU, segmSSU)\n\n # gather first \nlong_DF <- ssv %>% gather(name, subsp, subsp1V:subsp20V)\n\n\nlong_DF <- long_DF[order(long_DF$algorithm),]\n\n# subspace length\nlengthSS <- c(length(long_DF$subsp[[1]]))\n#   .. add length as new column \"length\"\nfor (i in 2:length(long_DF$subsp)){\n    lengthSS <- c(lengthSS, length(long_DF$subsp[[i]]))\n}\nsubspaces <- mutate(long_DF, length = lengthSS) \n\n# mean per algorithm per dataset\nalgdsDistinct <- subspaces %>% select(algorithm, dataset) %>% distinct\n\ndfMean <- data.frame()\nfor (i in 1:nrow(algdsDistinct)){\n \n  tmpdf <- filter(subspaces, subspaces$algorithm == algdsDistinct$algorithm[i] & subspaces$dataset == algdsDistinct$dataset[i])             %>% select(length)\n  \n  tmpMean <- mean(tmpdf$length)\n  # print(tmpMean)\n  v <- data.frame(dataset = algdsDistinct$dataset[i], algorithm = algdsDistinct$algorithm[i], mean = tmpMean)\n  dfMean  <- rbind(dfMean, v)\n\n}\n\n\nggplot(dfMean, aes(factor(dataset), mean, fill=algorithm, x=dataset, y=mean, gg)) +\n  geom_bar(stat=\"identity\", position = \"dodge\") + \n  scale_fill_brewer(palette = \"Set2\") +\n  labs(title =\"Average size of Top20-Subspaces\", y = \"Mean size\") \n``` \n<br>\n<br>\nWith CMI subspaces with higher dimensions were found. It is even more obvious when you look at the Top5 Subspaces.\n\n```{r eval=T, echo=FALSE, warning=FALSE}\n# Mean on top5-subspaces:\ntop5Length <- filter(subspaces, subspaces$name == \"subsp1V\" | subspaces$name == \"subsp2V\" | subspaces$name == \"subsp3V\"\n                | subspaces$name == \"subsp4V\" | subspaces$name == \"subsp5V\") \n\ndfMean5 <- data.frame()\nfor (i in 1:nrow(algdsDistinct)){\n \n  tmpdf5 <- filter(top5Length, top5Length$algorithm == algdsDistinct$algorithm[i] & top5Length$dataset == algdsDistinct$dataset[i])             %>% select(length)\n  \n  tmpMean5 <- mean(tmpdf5$length)\n  # print(tmpMean)\n  v <- data.frame(dataset = algdsDistinct$dataset[i], algorithm = algdsDistinct$algorithm[i], mean = tmpMean5)\n  dfMean5  <- rbind(dfMean5, v)\n}\n\nggplot(dfMean5, aes(factor(dataset), mean, fill=algorithm, x=dataset, y=mean, gg)) +\n  geom_bar(stat=\"identity\", position = \"dodge\") + \n  scale_fill_brewer(palette = \"Set2\") +\n  ggtitle(\"Average size of Top5-Subspaces\")\n\n\n```\n\n\nSome examples of found subspaces:\n```{r, echo=FALSE, warning=FALSE}\n# Examples of top5-subspaces:\n\ncolNam <- c(\"Algorithm\",\"Dataset\",\"Subspace 1\",\"Subspace 2\",\"Subspace 3\",\"Subspace 4\",\"Subspace 5\")\n\nkable(glass5SS, caption = \"Top-5-Subspaces - Glass-Dataset\", col.names = colNam)\nkable(ion5SS, caption = \"Top-5-Subspaces - Ion-Dataset\", col.names = colNam)\nkable(pen5SS, caption = \"Top-5-Subspaces - Pendigits-Dataset\", col.names = colNam)\n\n```\n\n\nThe size of the subspaces is much higher for CMI than for HiCs and for GMD. \nA reason is maybe the higher score a subspace gets by adding further dimensions. \n\n<br>\n<br>\nThe global mean of subspace size is \n\n```{r eval=T, echo=FALSE, warning=FALSE}\n#   global mean\n  print(globalMean <- mean(subspaces$length))\n```\n\nThose are the mean sizes of subspaces per algorithm:\n\n```{r eval=T, echo=FALSE, warning=FALSE}\n#   mean per algorithm\nmeanAlg <- data.frame()\nSSCMI <- filter(subspaces, subspaces$algorithm == \"CMI\")\nmeanCMI <- mean(SSCMI$length)\nnL <- data.frame(algorithm = \"CMI\", mean = meanCMI)\nmeanAlg <- rbind(meanAlg, nL)\n\nSSHics <- filter(subspaces, subspaces$algorithm == \"HiCS\")\nmeanHics <- mean(SSHics$length)\nnL <- data.frame(algorithm = \"HiCS\", mean = meanHics)\nmeanAlg <- rbind(meanAlg, nL)\n\nSSGMD <- filter(subspaces, subspaces$algorithm == \"GMD\")\nmeanGMD <- mean(SSGMD$length)\nnL <- data.frame(algorithm = \"GMD\", mean = meanGMD)\nmeanAlg <- rbind(meanAlg, nL)\n\nggplot(meanAlg, mapping = aes(factor(algorithm), mean, x=algorithm, y=mean, gg)) +\ngeom_bar(stat=\"identity\", position = \"dodge\") + \n  scale_color_brewer(palette = \"Set2\") +\n  labs(title =\"Average size of Top20-Subspaces per algorithm\", y = \"Mean size\") \n``` \n\n\n\n",
    "created" : 1479408219927.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3331382079",
    "id" : "385EFE44",
    "lastKnownWriteTime" : 1481120309,
    "last_content_update" : 1481120309967,
    "path" : "D:/Uni/SS16/Hiwi/github/TestsCMIHiCS/experimentCMIHiCSResults.Rmd",
    "project_path" : "experimentCMIHiCSResults.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}