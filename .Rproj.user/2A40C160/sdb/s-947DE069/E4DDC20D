{
    "collab_server" : "",
    "contents" : "library(data.table)\nlibrary(subcon)\n\n\n####### read data #######\nreadData <-function(inputPath, fileName){\n\n  # if(grepl(\".csv\", fileName)){\n  #   dataset_labeled <- fread(paste0(inputPath, \"/\", fileName))\n  # }else{\n  #   dataset_labeled <- as.data.table(read.arff(paste0(inputPath,\"/\", fileName)))\n  # }\n  dataset_labeled <- as.data.table(read.csv(paste0(inputPath, \"/\", fileName), header=FALSE, sep = \";\"))\n\n  # separate labels\n  labels <- ifelse(as.numeric(levels(dataset_labeled$class))[dataset_labeled$class] > 0 , 1, 0)\n  labels <- dataset_labeled[[ncol(dataset_labeled)]]\n  dt <- dataset_labeled[, -ncol(dataset_labeled), with=F]\n\n  numMat <- data.matrix(dt)\n}\n\n####### Subspaces - Length #######\nsubspaceLength <-function(CMIResult){\n  subspaces <- CMIResult$subspaces\n  print(\"Histogram - Subspace Length\")\n  print(table(sapply(subspaces, length)))\n\n  print(\"Subspaces\")\n  print(subspaces)\n  print(\"Contrast of subspaces\")\n  print(CMIResult$contrast)\n}\n\n\n####### AUC under ROC curve #######\n# Calculate LOF score for subspaces\nrunLOF <-function(CMIResult, dt){\n  lofactors <- lapply(CMIResult$subspaces, function(x) {\n    lof <- LOF(dt[,unlist(x), with=F], k=10)\n    lof[is.infinite(lof) | is.nan(lof)] <- 1\n    lof\n  })\n\n  # AUC for combined scoring\n  combAUC <- combinedScoreAUC(combinationFun = sumCombination, scores = lofactors, label = labels)\n  print(\"combinedScoreAUC\")\n  print(combAUC)\n}\n\n\n#parameter\nnumCluster <- 2\ntopkSearch <- 3\ntopkOutput <- 3\n\ninputPath <- \"D:/Uni/SS16/Hiwi/Paper/CMI_Daten\"\n\n\n# run experiments\ninputs <- list.files(path=inputPath, recursive = T)\n\nforeach(i=1:nrow(inputs) %dopar% {\n\n  fileName <- inputs[i]\n  numMat <- readData(inputPath, fileName)\n\n\n  startCmi <- Sys.time()\n  CMIResult = CMISearch(numMat, numCluster, topkSearch, topkOutput)\n  endCmi <- Sys.time\n  # Duration CMI\n  difftime(endCmi, startCmi, unit=\"sec\")\n\n\n\n  subspaceLength(CMIResult)\n\n  runLOF(CMIResult, dt)\n\n\n})\n\n",
    "created" : 1476367338578.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2743620931",
    "id" : "E4DDC20D",
    "lastKnownWriteTime" : 1476190489,
    "last_content_update" : 1476190489,
    "path" : "D:/Uni/SS16/Hiwi/Code_Archiv/HICSvsCMI.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}